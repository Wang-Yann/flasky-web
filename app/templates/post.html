{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Flasky - Post{% endblock %}

{% block page_content %}
<div id='article-details' class="entry-box">
    {% include '_posts.html' %}
    <hr>

    <h4 id="comments"><span class="glyphicon glyphicon-comment">发表评论</span></h4>
        {% if current_user.can(Permission.COMMENT) %}
        <div class="row">
             <div class="alert alert-info alert-dismissable" id="reply-dialog-box">
             <button type="button" class="close" data-dismiss="alert" id="undo_reply">&times;</button>
            {# 回复<strong><i>叶子</i></strong> </div>#}
            <div class="col-md-8" id="submit-comment-container">
                <form class="submit-comment-form" id="submit-comment-form" method="post" action="">
                    {{ form.csrf_token }}
                    {{ form.name.label }}{{ form.name(class='form-control', required='', value=current_user.username) }}
                    {{ form.follow(type='hidden') }}
                    {{ form.body.label }}{{ form.body(class='form-control', required='')}}
                    <button type="submit" class="btn btn-default">
                        提交
                    </button>
                </form>
            </div>
        </div>
        {% endif %}
    
    <h4 id="comments"><span class="glyphicon glyphicon-comment">评论</span></h4>
    {% include '_comments.html' %}
        {% if pagination %}
        <div class="pagination">
            {{ macros.pagination_widget(pagination, '.post', fragment='#comments', id=posts[0].id) }}
        </div>
    {% endif %}

</div>
{% endblock %}



{% block stylesheet %}
    {{ super() }}
    <link href="{{ url_for('static', filename='css/prism.css') }}" rel="stylesheet">
{% endblock %}


{% block script %}
    <script src="{{ url_for('static', filename='tinymce/js/tinymce/extentsion_self/codesimple_extentsion/prism.js') }}">
    </script>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
    <script src="{{ url_for('static', filename='js/commentReply.js') }}"></script>
{% endblock %} 

